{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n  static values = {\n    mode: String\n  };\n\n  get groups() {\n    return this.scope.findAllElements('[data-form-group-id]');\n  }\n\n  toggle(e) {\n    let method;\n    if (this.modeValue == 'disabled') {\n      method = this.toggleDisabled.bind(this);\n    } else {\n      method = this.toggleVisible.bind(this);\n    }\n\n    this.groups.forEach(group => method(group, false));\n    this.findGroups(e.target).forEach(group => method(group, true));\n  }\n\n  toggleVisible(group, visible) {\n    group.style.display = visible ? '' : 'none';\n    group.classList.toggle('st-form-groups--visible', visible);\n  }\n\n  toggleDisabled(group, enabled) {\n    this.inputElements(group).forEach(elem => elem.disabled = !enabled);\n  }\n\n  inputElements(group) {\n    return group.querySelectorAll('input, select, textarea, button')\n  }\n\n  findGroups(target) {\n    let id = this.getGroupID(target);\n    if (!id) {\n      return [];\n    } else {\n      return this.groups.filter(group => this.parseJSON(group.getAttribute('data-form-group-id')).includes(id));\n    }\n  }\n\n  getGroupID(target) {\n    if (target.matches('select')) {\n      return target.options[target.selectedIndex].value;\n    } else if (target.matches('input[type=radio]')) {\n      return target.value;\n    } else if (target.matches('input[type=checkbox]')) {\n      return target.checked;\n    }\n  }\n\n  parseJSON(ids) {\n    try {\n      return [].concat(JSON.parse(ids));\n    } catch(e) {\n      return [].concat(ids);\n    }\n  }\n}\n"],"names":["Controller","groups","scope","findAllElements","toggle","e","method","this","modeValue","toggleDisabled","bind","toggleVisible","forEach","group","findGroups","target","visible","style","display","classList","enabled","inputElements","elem","disabled","querySelectorAll","id","getGroupID","filter","parseJSON","getAttribute","includes","matches","options","selectedIndex","value","checked","ids","concat","JSON","parse","values","mode","String"],"mappings":"mTAE6BA,aAKvBC,aACF,YAAYC,MAAMC,gBAAgB,wBAGpCC,OAAOC,GACL,IAAIC,EAEFA,EADoB,YAAlBC,KAAKC,UACED,KAAKE,eAAeC,KAAKH,MAEzBA,KAAKI,cAAcD,KAAKH,MAGnCA,KAAKN,OAAOW,QAAQC,GAASP,EAAOO,GAAO,IAC3CN,KAAKO,WAAWT,EAAEU,QAAQH,QAAQC,GAASP,EAAOO,GAAO,IAG3DF,cAAcE,EAAOG,GACnBH,EAAMI,MAAMC,QAAUF,EAAU,GAAK,OACrCH,EAAMM,UAAUf,OAAO,0BAA2BY,GAGpDP,eAAeI,EAAOO,GACpBb,KAAKc,cAAcR,GAAOD,QAAQU,GAAQA,EAAKC,UAAYH,GAG7DC,cAAcR,GACZ,OAAOA,EAAMW,iBAAiB,mCAGhCV,WAAWC,GACT,IAAIU,EAAKlB,KAAKmB,WAAWX,GACzB,OAAKU,OAGSxB,OAAO0B,OAAOd,GAASN,KAAKqB,UAAUf,EAAMgB,aAAa,uBAAuBC,SAASL,IAF9F,GAMXC,WAAWX,GACT,OAAIA,EAAOgB,QAAQ,UACVhB,EAAOiB,QAAQjB,EAAOkB,eAAeC,MACnCnB,EAAOgB,QAAQ,qBACjBhB,EAAOmB,MACLnB,EAAOgB,QAAQ,wBACjBhB,EAAOoB,eAIlBP,UAAUQ,GACR,IACE,MAAO,GAAGC,OAAOC,KAAKC,MAAMH,IAC5B,MAAM/B,GACN,MAAO,GAAGgC,OAAOD,cAxDdI,OAAS,CACdC,KAAMC"}