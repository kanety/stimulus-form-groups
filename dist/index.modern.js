import{Controller as t}from"@hotwired/stimulus";class e extends t{get groups(){return this.scope.findAllElements("[data-form-group-id]")}get togglers(){return this.context.bindingObserver.bindings.filter(t=>"toggle"==t.action.methodName).map(t=>t.action.element)}connect(){this.enableAnim(!1),this.groups.forEach(t=>this.toggleGroup(t,!1)),this.togglers.forEach(t=>this.toggleBy(t)),setTimeout(()=>this.enableAnim(!0),200)}enableAnim(t){this.groups.forEach(e=>{t?e.classList.remove("st-form-groups--disable-trans"):e.classList.add("st-form-groups--disable-trans")})}toggle(t){this.groups.forEach(t=>this.toggleGroup(t,!1)),this.togglers.forEach(t=>this.toggleBy(t))}toggleBy(t){this.findGroups(t).forEach(t=>this.toggleGroup(t,!0))}toggleGroup(t,e){return"disabled"==this.modeValue?this.toggleDisabled(t,e):this.toggleVisible(t,e)}toggleVisible(t,e){e?(t.style.visibility="",t.style.overflow="",t.style.height=t.scrollHeight+"px",t.classList.add("st-form-groups__group--visible")):(t.style.visibility="hidden",t.style.overflow="hidden",t.style.height="0px",t.classList.remove("st-form-groups__group--visible"))}toggleDisabled(t,e){this.inputElements(t).forEach(t=>t.disabled=!e)}inputElements(t){return t.querySelectorAll("input, select, textarea, button")}findGroups(t){let e=this.getValue(t);return e?this.groups.filter(s=>this.isMatch(s,t.name,e)):[]}isMatch(t,e,s){return this.extractIDs(t.getAttribute("data-form-group-id")).some(t=>{let[i,r]=this.extractNameValue(t);return(!i||i==e)&&r==s})}getValue(t){if(t.matches("select"))return t.options[t.selectedIndex].value;if(t.matches("input[type=checkbox]"))return t.checked?t.value:null;if(t.matches("input[type=radio]")){let e=this.scope.findElement(`input[type=radio][name="${t.name}"]:checked`);return e?e.value:null}}extractIDs(t){return t.startsWith("[")?[].concat(this.parseJSON(t)):[].concat(t)}extractNameValue(t){return t.includes(":")?t.split(":",2):[null,t]}parseJSON(t){try{return JSON.parse(t)}catch(e){return t}}}e.values={mode:String};export{e as default};
//# sourceMappingURL=index.modern.js.map
